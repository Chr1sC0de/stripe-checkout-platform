name: Deploy Backend Infrastructure
on:
  workflow_dispatch:
    inputs:
      # set the environment name
      environment:
        default: null
        required: false
env:
  DEVELOPMENT_ENVIRONMENT: ${{ inputs.environment.default || github.ref_name == 'master' && 'dev0' || 'dev1'}}
  CDK_DEFAULT_REGION: ${{ vars.CDK_DEFAULT_REGION }}
  COMPANY: ${{ vars.COMPANY }}
jobs:
  deploy-backend-infrastructure:
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Print Directory
        run: |
          echo "INFO: current working directory: $(pwd)" \ 
          echo "INFO: current working directory contents: $(ls)"
      - name: Print Variables
        run: |
          . ./scripts/initialize_backend_print_variables.sh
